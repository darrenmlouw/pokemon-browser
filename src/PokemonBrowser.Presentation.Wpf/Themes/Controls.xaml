<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

  <!-- Theme-agnostic minimal control styles (rounded + flat) -->

  <CornerRadius x:Key="CardCornerRadius">16</CornerRadius>
  <CornerRadius x:Key="ControlCornerRadius">8</CornerRadius>


  <Thickness x:Key="CardPadding">16</Thickness>

  <Style TargetType="Window">
    <Setter Property="Background" Value="{DynamicResource AppBackgroundGradientBrush}" />
    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
    <Setter Property="FontFamily" Value="Segoe UI" />
    <Setter Property="FontSize" Value="13" />
    <Setter Property="UseLayoutRounding" Value="True" />
    <Setter Property="SnapsToDevicePixels" Value="True" />
  </Style>

  <Style TargetType="TextBlock">
    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
  </Style>

  <Style x:Key="MutedText" TargetType="TextBlock">
    <Setter Property="Foreground" Value="{DynamicResource TextMutedBrush}" />
  </Style>

  <Style x:Key="CardStyle" TargetType="Border">
    <Setter Property="Background" Value="{DynamicResource CardBackgroundBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource CardBorderBrush}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="CornerRadius" Value="{StaticResource CardCornerRadius}" />
    <Setter Property="Padding" Value="{StaticResource CardPadding}" />
    <Setter Property="Effect">
      <Setter.Value>
        <DropShadowEffect BlurRadius="18"
                          ShadowDepth="6"
                          Opacity="0.22"
                          Color="{DynamicResource CardShadowColor}"
                          RenderingBias="Quality" />
      </Setter.Value>
    </Setter>
    <Setter Property="SnapsToDevicePixels" Value="True" />
  </Style>

  <Style x:Key="FlatButtonTemplate" TargetType="Button">
    <Setter Property="Background" Value="{DynamicResource ControlBackgroundBrush}" />
    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource ControlBorderBrush}" />
    <Setter Property="BorderThickness" Value="0" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Button">
          <Border Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  CornerRadius="{StaticResource ControlCornerRadius}"
                  SnapsToDevicePixels="True">
            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="{TemplateBinding Padding}" />
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
              <Setter Property="Background" Value="{DynamicResource ControlHoverBrush}" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
              <Setter Property="Background" Value="{DynamicResource ControlPressedBrush}" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
              <Setter Property="Opacity" Value="0.45" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style x:Key="IconButtonStyle" TargetType="Button" BasedOn="{StaticResource FlatButtonTemplate}">
    <Setter Property="Width" Value="32" />
    <Setter Property="MinWidth" Value="0" />
    <Setter Property="Height" Value="32" />
    <Setter Property="Padding" Value="0" />
  </Style>

  <!-- Default button style (flat + rounded). Kept minimal, no forced min-width. -->
  <Style TargetType="Button" BasedOn="{StaticResource FlatButtonTemplate}">
    <Setter Property="MinWidth" Value="0" />
    <Setter Property="Height" Value="38" />
    <Setter Property="Padding" Value="14,6" />
  </Style>

  <Style TargetType="ToggleButton">
    <Setter Property="Height" Value="38" />
    <Setter Property="MinWidth" Value="120" />
    <Setter Property="Padding" Value="14,6" />
    <Setter Property="Background" Value="{DynamicResource ControlBackgroundBrush}" />
    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource ControlBorderBrush}" />
    <Setter Property="BorderThickness" Value="0" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ToggleButton">
          <Border Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  Margin="{TemplateBinding BorderThickness}"
                  CornerRadius="{StaticResource ControlCornerRadius}"
                  SnapsToDevicePixels="True">
            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="{TemplateBinding Padding}" />
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
              <Setter Property="Background" Value="{DynamicResource ControlHoverBrush}" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
              <Setter Property="Background" Value="{DynamicResource ControlPressedBrush}" />
            </Trigger>
            <Trigger Property="IsChecked" Value="True">
              <Setter Property="Background" Value="{DynamicResource AccentBrush}" />
              <Setter Property="Foreground" Value="{DynamicResource SurfaceBrush}" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
              <Setter Property="Opacity" Value="0.55" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- Square icon toggle (used for theme toggle) -->
  <Style x:Key="IconToggleButtonStyle" TargetType="ToggleButton">
    <Setter Property="Width" Value="32" />
    <Setter Property="Height" Value="32" />
    <Setter Property="MinWidth" Value="0" />
    <Setter Property="Padding" Value="0" />
    <Setter Property="Background" Value="{DynamicResource ControlBackgroundBrush}" />
    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource ControlBorderBrush}" />
    <Setter Property="BorderThickness" Value="0" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ToggleButton">
          <Border Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  Margin="{TemplateBinding BorderThickness}"
                  CornerRadius="{StaticResource ControlCornerRadius}"
                  SnapsToDevicePixels="True">
            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="{TemplateBinding Padding}" />
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
              <Setter Property="Background" Value="{DynamicResource ControlHoverBrush}" />
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
              <Setter Property="Background" Value="{DynamicResource ControlPressedBrush}" />
            </Trigger>
            <Trigger Property="IsChecked" Value="True">
              <Setter Property="Background" Value="{DynamicResource AccentBrush}" />
              <Setter Property="Foreground" Value="{DynamicResource SurfaceBrush}" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
              <Setter Property="Opacity" Value="0.55" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style TargetType="TextBox">
    <Setter Property="Height" Value="38" />
    <Setter Property="Padding" Value="8,0,8,0" />
    <Setter Property="Background" Value="{DynamicResource ControlBackgroundBrush}" />
    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource ControlBorderBrush}" />
    <Setter Property="BorderThickness" Value="1.5" />
    <Setter Property="CaretBrush" Value="{DynamicResource TextBrush}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="TextBox">
          <Border Background="{TemplateBinding Background}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  CornerRadius="{StaticResource ControlCornerRadius}">
            <ScrollViewer x:Name="PART_ContentHost" Margin="{TemplateBinding Padding}" />
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsKeyboardFocused" Value="True">
              <Setter Property="BorderBrush" Value="{DynamicResource AccentBrush}" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="True">
              <Setter Property="Background" Value="{DynamicResource ControlHoverBrush}" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
              <Setter Property="Opacity" Value="0.55" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style TargetType="ProgressBar">
    <Setter Property="Foreground" Value="{DynamicResource AccentBrush}" />
    <Setter Property="Background" Value="{DynamicResource ProgressTrackBrush}" />
    <Setter Property="Height" Value="10" />
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ProgressBar">
          <Border x:Name="Track"
                  Background="{TemplateBinding Background}"
                  CornerRadius="4"
                  ClipToBounds="True"
                  SnapsToDevicePixels="True">
            <Grid SnapsToDevicePixels="True">
              <Track x:Name="PART_Track"
                     Minimum="{TemplateBinding Minimum}"
                     Maximum="{TemplateBinding Maximum}"
                     Value="{TemplateBinding Value}">
                <Track.DecreaseRepeatButton>
                  <RepeatButton IsHitTestVisible="False" Focusable="False" OverridesDefaultStyle="True" Background="{TemplateBinding Foreground}">
                    <RepeatButton.Template>
                      <ControlTemplate TargetType="RepeatButton">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4" SnapsToDevicePixels="True" />
                      </ControlTemplate>
                    </RepeatButton.Template>
                  </RepeatButton>
                </Track.DecreaseRepeatButton>
                <Track.IncreaseRepeatButton>
                  <RepeatButton IsHitTestVisible="False" Focusable="False" OverridesDefaultStyle="True" Background="Transparent">
                    <RepeatButton.Template>
                      <ControlTemplate TargetType="RepeatButton">
                        <Border Background="Transparent" SnapsToDevicePixels="True" />
                      </ControlTemplate>
                    </RepeatButton.Template>
                  </RepeatButton>
                </Track.IncreaseRepeatButton>
              </Track>

              <Border x:Name="IndeterminateIndicator"
                      Background="{TemplateBinding Foreground}"
                      CornerRadius="4"
                      Opacity="0"
                      HorizontalAlignment="Left"
                      Width="0">
                <Border.RenderTransform>
                  <TranslateTransform X="-60" />
                </Border.RenderTransform>
              </Border>
            </Grid>
          </Border>

          <ControlTemplate.Triggers>
            <Trigger Property="IsIndeterminate" Value="True">
              <Setter TargetName="PART_Track" Property="Visibility" Value="Collapsed" />
              <Setter TargetName="IndeterminateIndicator" Property="Opacity" Value="0.85" />
              <Setter TargetName="IndeterminateIndicator" Property="Width" Value="70" />
              <Trigger.EnterActions>
                <BeginStoryboard>
                  <Storyboard RepeatBehavior="Forever">
                    <DoubleAnimation Storyboard.TargetName="IndeterminateIndicator"
                                     Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                     From="-80" To="420" Duration="0:0:1.0" />
                  </Storyboard>
                </BeginStoryboard>
              </Trigger.EnterActions>
            </Trigger>

            <Trigger Property="IsEnabled" Value="False">
              <Setter Property="Opacity" Value="0.55" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style TargetType="ListBox">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="BorderThickness" Value="0" />
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
  </Style>

  <Style TargetType="ListBoxItem">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="Padding" Value="10,8" />
    <Setter Property="Margin" Value="0,4,8,4" />
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Panel.ZIndex" Value="0" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ListBoxItem">
          <Border x:Name="ItemBorder" Background="{TemplateBinding Background}" CornerRadius="16" SnapsToDevicePixels="True">
            <ContentPresenter />
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
              <Setter Property="Background" Value="{DynamicResource ListItemHoverBrush}" />
            </Trigger>
            <Trigger Property="IsSelected" Value="True">
              <Setter Property="Background" Value="{DynamicResource ListItemSelectedBrush}" />
              <Setter Property="Panel.ZIndex" Value="1" />
              <Setter TargetName="ItemBorder" Property="Effect">
                <Setter.Value>
                  <DropShadowEffect BlurRadius="18"
                                    ShadowDepth="4"
                                    Opacity="0.20"
                                    Color="{DynamicResource CardShadowColor}"
                                    RenderingBias="Quality" />
                </Setter.Value>
              </Setter>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!-- Scrollbar (theme-aware) -->
  <Style x:Key="ScrollBarThumbStyle" TargetType="Thumb">
    <Setter Property="Background" Value="{DynamicResource TextMutedBrush}" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="Thumb">
          <Border Background="{TemplateBinding Background}" CornerRadius="6" Opacity="0.33" />
        </ControlTemplate>
      </Setter.Value>
    </Setter>
    <Style.Triggers>
      <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Opacity" Value="0.9" />
      </Trigger>
      <Trigger Property="IsDragging" Value="True">
        <Setter Property="Opacity" Value="1" />
      </Trigger>
    </Style.Triggers>
  </Style>

  <Style TargetType="ScrollBar">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="Width" Value="12" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="ScrollBar">
          <Grid Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
            <Track x:Name="PART_Track" IsDirectionReversed="True">
              <Track.DecreaseRepeatButton>
                <RepeatButton Command="ScrollBar.PageUpCommand" Opacity="0" Focusable="False" />
              </Track.DecreaseRepeatButton>
              <Track.Thumb>
                <Thumb Style="{StaticResource ScrollBarThumbStyle}" />
              </Track.Thumb>
              <Track.IncreaseRepeatButton>
                <RepeatButton Command="ScrollBar.PageDownCommand" Opacity="0" Focusable="False" />
              </Track.IncreaseRepeatButton>
            </Track>
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

</ResourceDictionary>
